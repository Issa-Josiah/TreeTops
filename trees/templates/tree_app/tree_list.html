{% extends 'home.html' %}
{% load static %}
{% block title %}All Trees{% endblock %}

{% block content %}
<div class="container my-4">
{% if not user.is_authenticated %}.
    <a href="{% url 'payment' %}" target="_blank"
   style="
       position: absolute;  /* will scroll with the page */
       top: 80px;           /* distance from top of container */
       right: 20px;         /* distance from right */
       z-index: 1050;
   ">
    <img src="{% static 'images/donate.png' %}" alt="Donate"
         style="
             width: 100px;
             height: 100px;
             border-radius: 50%;
             object-fit: cover;
             cursor: pointer;
             box-shadow: 0 4px 8px rgba(0,0,0,0.2);
             transition: transform 0.2s;
         ">
</a>

    {% endif %}

    <!-- Page Header and Add Tree Button -->
<div class="d-flex justify-content-between align-items-center mb-4 ">
    <h2>All Trees</h2>

    {% if user.is_authenticated %}
        <a href="{% url 'add_tree' %}" class="btn btn-success ">Plant Tree</a>
    {% endif %}
</div>

    <!-- Trees Grid -->
    <div class="row g-4">
        {% for tree in trees %}
        <div class="col-12 col-md-6 col-lg-4 d-flex">
            <div class="card w-100 h-100 shadow-sm rounded overflow-hidden d-flex flex-column">

                <!-- Tree Image -->
                {% if tree.image %}
                <img src="{{ tree.image.url }}" class="card-img-top" alt="{{ tree.name }}" style="height:200px; object-fit:cover;">
                {% else %}
                <img src="{% static 'images/default_tree.jpg' %}" class="card-img-top" alt="No Image" style="height:200px; object-fit:cover;">
                {% endif %}

                <!-- Card Body -->
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{ tree.name }}</h5>
                    <p class="card-text flex-grow-1">{{ tree.description|truncatechars:80 }}</p>
                    <p><strong>Location:</strong> {{ tree.location }}</p>
                    
                    <a href="{% url 'tree_detail' tree.id %}" class="btn btn-primary mt-auto">View</a>
                </div>
            </div>
        </div>
        {% empty %}
        <p class="text-center text-muted">No trees available yet.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
